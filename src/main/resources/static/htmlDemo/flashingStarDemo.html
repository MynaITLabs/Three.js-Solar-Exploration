<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flashing Star Demo</title>

    <style>

        html, body, canvas {
            height: 100%;
            width: 100%;
        }

        body {
            background-color: #000000;
            margin: 0;
            overflow: hidden;
        }

    </style>

</head>


<body>

<canvas id="sceneArea"></canvas>

<script src="../js/three.min.js"></script>

<script>

    var camera, scene, renderer;

    var stars = [];
    var starPositions = [[0, 0, 0], [5, 0, -40]];

    init();
    animate();

    function init() {

        var threeElement = document.getElementById('sceneArea');

        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.set(0, 0, 100);

        scene = new THREE.Scene();
        scene.add(new THREE.AmbientLight(0x00020));

        createStars();

        renderer = new THREE.WebGLRenderer({canvas: threeElement, antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
    }

    function createOneStar() {
        var geometry = new THREE.SphereGeometry(1, 32, 32);
        var material = new THREE.MeshBasicMaterial( {color: 0xd3d3d3} );

        var star = new THREE.Mesh(geometry, material);
        star.count = 0;
        return star;
    }

    function createStars() {
        for (var i = 0; i < starPositions.length; i++) {
            stars[i] = createOneStar();
            stars[i].position.x = starPositions[i][0];
            stars[i].position.y = starPositions[i][1];
            stars[i].position.z = starPositions[i][2];
            scene.add(stars[i]);
        }
    }


    function animate() {

        requestAnimationFrame(animate);
        render();
    }

    function flash() {
        for (var i = 0; i < stars.length; i++) {
            stars[i].count += Math.random() > 0.5 ? 2 : 3;
            if (stars[i].count > 20) {
                stars[i].material.color.set(stars[i].material.color.getHex() == 0xd3d3d3 ? 0xffffff : 0xd3d3d3);
                stars[i].count = 0;
            }
        }
    }

    function render() {

        flash();
        renderer.render(scene, camera);
    }

</script>

</body>
</html>